<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Administration ‚Äì Acc√®s r√©serv√© (Bureau) | OSD9TDJ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Interne : anti-indexation / anti-cache -->
  <meta name="robots" content="noindex,nofollow,noarchive,nosnippet,max-snippet:-1,max-image-preview:none,max-video-preview:-1">
  <meta name="googlebot" content="noindex,nofollow,noarchive,nosnippet,max-snippet:-1,max-image-preview:none,max-video-preview:-1">
  <meta name="bingbot" content="noindex,nofollow,noarchive,nosnippet,max-snippet:-1,max-image-preview:none,max-video-preview:-1">

  <!-- S√©curit√© -->
  <meta name="referrer" content="no-referrer">

  <!-- CSP : autorise Zoho en iframe + JS inline (modale) -->
  <meta http-equiv="Content-Security-Policy" content="
    default-src 'self';
    base-uri 'self';
    form-action 'self';
    frame-ancestors 'none';
    object-src 'none';
    connect-src 'none';
    img-src 'self' https: data:;
    style-src 'self' 'unsafe-inline' https://fonts.googleapis.com;
    font-src https://fonts.gstatic.com;
    script-src 'self' 'unsafe-inline';
    frame-src https://workdrive.zohopublic.eu https://*.zohopublic.eu https://*.zoho.com https://*.zoho.eu;
    upgrade-insecure-requests;
  ">

  <!-- Watermarks internes -->
  <meta name="osd9tdj-signature" content="WTRMK-ADMIN-OMEGA-2026-OSD9TDJ-BUREAU-ACCESS-RESERVE" />
  <meta name="osd9tdj-origin" content="osd9tdj.org / administration.html" />

  <!-- Polices -->
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --or:#ffd700;
      --clair:#fdf7e5;
      --orSoft: rgba(255,215,0,0.45);
      --orLine: rgba(255,215,0,0.28);
      --darkA: rgba(0,0,0,0.62);
      --darkB: rgba(0,0,0,0.92);
      --modalSideW: 300px;
    }
    *{ box-sizing:border-box; }

    html, body{
      height:100%;
      margin:0;
      padding:0;
      overflow:hidden;
      font-family:'Lato', Arial, sans-serif;
      color:#fff;
      text-align:center;
      min-height:100vh;
    }

    /* ‚úÖ Fond admin */
    body::before{
      content:"";
      position:fixed;
      inset:0;
      background-image:url("fond-adm.JPG");
      background-repeat:no-repeat;
      background-position:center center;
      background-size:cover;
      background-attachment:fixed;
      z-index:-2;
    }
    @media (max-width: 900px){
      body::before{ background-attachment:scroll; }
    }

    /* Cadre fixe */
    .frame-fixed{
      position:fixed;
      inset:14px;
      border-radius:22px;
      border:2px solid rgba(255,215,0,0.55);
      box-shadow:
        0 0 0 1px rgba(253,247,229,0.16) inset,
        0 0 38px rgba(0,0,0,0.35);
      pointer-events:none;
      z-index:40;
    }

    /* Scroll interne */
    .viewport-scroll{
      position:fixed;
      inset:22px;
      overflow-y:auto;
      overflow-x:hidden;
      -webkit-overflow-scrolling:touch;
      z-index:1;
    }

.menu-dot{
  position: fixed;
  right: 26px;
  top: calc(26px + env(safe-area-inset-top));
  z-index: 100;
  pointer-events: auto;

  width: 46px;
  height: 34px;
  display: grid;
  place-items: center;

  border-radius: 999px;
  border: 1px solid rgba(214,167,40,0.55);
  background: rgba(0,0,0,0.22);
  backdrop-filter: blur(6px);
  box-shadow: 0 6px 16px rgba(0,0,0,0.35);

  font-family:'Cinzel',serif;
  color: #d6a728;
  font-size: 22px;
  line-height: 1;

  text-decoration: none;
  user-select: none;
}

.menu-dot:hover{
  background: rgba(214,167,40,0.12);
  color:#fff;
}

    /* Menu 3 points (haut droite page) */
    .top-menu{
      position:fixed;
      top:26px;
      right:26px;
      z-index:60;
      pointer-events:auto;
    }
    .top-menu details{ position:relative; }
    .top-menu summary{
      list-style:none;
      cursor:pointer;
      user-select:none;
      width:46px;
      height:34px;
      display:grid;
      place-items:center;
      border-radius:999px;
      border:1px solid rgba(255,215,0,0.55);
      background:rgba(0,0,0,0.22);
      backdrop-filter: blur(6px);
      box-shadow:0 6px 16px rgba(0,0,0,0.35);
      font-family:'Cinzel',serif;
      color:var(--or);
      font-size:22px;
      line-height:1;
    }
    .top-menu summary::-webkit-details-marker{ display:none; }
    .menu-panel{
      position:absolute;
      right:0;
      margin-top:10px;
      width:290px;
      max-width:calc(100vw - 60px);
      border-radius:14px;
      border:1px solid rgba(255,215,0,0.45);
      background:rgba(0,0,0,0.80);
      box-shadow:0 18px 40px rgba(0,0,0,0.55);
      overflow:hidden;
    }
    .menu-panel a{
      display:block;
      padding:11px 12px;
      text-decoration:none;
      color:rgba(253,247,229,0.92);
      font-family:'Cinzel',serif;
      font-weight:700;
      font-size:0.92rem;
      border-bottom:1px solid rgba(255,215,0,0.18);
    }
    .menu-panel a:hover{
      background:rgba(255,215,0,0.10);
      color:#fff;
    }
    .menu-panel a:last-child{ border-bottom:none; }

    /* Overlay page */
    .overlay{
      min-height:100vh;
      padding:30px 15px 28px;
      box-sizing:border-box;
      background: radial-gradient(circle at top,
        rgba(0,0,0,0.38),
        rgba(0,0,0,0.48));
      display:flex;
      flex-direction:column;
      align-items:center;
    }

    /* Badge */
    .lock-badge{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding:10px 18px;
      border-radius:999px;
      border:1px solid var(--orSoft);
      background:rgba(0,0,0,0.55);
      font-family:'Cinzel',serif;
      font-weight:700;
      color:var(--or);
      margin:8px auto 10px;
      box-shadow:0 0 18px rgba(0,0,0,0.65);
    }

    h1{
      font-family:'Cinzel',serif;
      font-size:1.9rem;
      margin:6px 0 6px;
      text-shadow:0 0 8px rgba(0,0,0,0.7);
    }
    .subtitle{
      font-size:0.95rem;
      opacity:0.95;
      margin:0 0 12px;
      max-width:980px;
    }

    /* Avertissement */
    .warning{
      width:100%;
      max-width:980px;
      margin:10px auto 14px;
      padding:14px 14px;
      border-radius:16px;
      border:1px solid rgba(255,215,0,0.28);
      background:rgba(0,0,0,0.62);
      text-align:left;
      box-shadow:0 0 22px rgba(0,0,0,0.65);
    }
    .warning strong{
      font-family:'Cinzel',serif;
      color:var(--or);
      letter-spacing:0.03em;
    }
    .warning p{
      margin:8px 0 0;
      font-size:0.92rem;
      line-height:1.45;
      opacity:0.92;
    }

    .btn-or{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:9px 14px;
      border-radius:999px;
      background: linear-gradient(135deg, #ffd700, #e6c200);
      color:#111;
      text-decoration:none;
      font-family:'Cinzel',serif;
      font-weight:700;
      font-size:0.86rem;
      box-shadow:
        0 0 0 1px rgba(255,215,0,0.75) inset,
        0 6px 14px rgba(0,0,0,0.45);
      margin:10px 0 10px;
      border:0;
      cursor:pointer;
    }

    /* Accord√©ons */
    .accordion{
      width:100%;
      max-width:980px;
      margin:12px auto 0;
      background:rgba(0,0,0,0.60);
      border:1px solid rgba(255,215,0,0.28);
      border-radius:18px;
      overflow:hidden;
      box-shadow:0 0 22px rgba(0,0,0,0.65);
      text-align:left;
    }
    .accordion summary{
      cursor:pointer;
      list-style:none;
      user-select:none;
      padding:14px 14px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      font-family:'Cinzel',serif;
      color:var(--or);
      font-weight:700;
      letter-spacing:0.04em;
      background:rgba(0,0,0,0.45);
      border-bottom:1px solid rgba(255,215,0,0.14);
    }
    .accordion summary::-webkit-details-marker{ display:none; }
    .acc-right{ color:rgba(255,215,0,0.85); font-size:1.1rem; }
    .acc-body{ padding:14px; }

    /* Sous-accord√©ons */
    .subacc{
      margin:10px 0 0;
      border:1px solid rgba(255,215,0,0.18);
      border-radius:16px;
      overflow:hidden;
      background:rgba(0,0,0,0.35);
    }
    .subacc summary{
      padding:12px 12px;
      font-size:0.95rem;
      border-bottom:1px solid rgba(255,215,0,0.12);
    }

    /* Cartes */
    .cards{
      display:grid;
      grid-template-columns:repeat(1, minmax(0, 1fr));
      gap:16px;
      width:100%;
      margin:0;
    }
    @media (min-width: 700px){
      .cards{ grid-template-columns:repeat(2, minmax(0, 1fr)); }
    }
    @media (min-width: 1000px){
      .cards{ grid-template-columns:repeat(3, minmax(0, 1fr)); }
    }
    .card{
      background:rgba(0,0,0,0.62);
      border:1px solid rgba(255,215,0,0.35);
      border-radius:18px;
      padding:16px 14px;
      box-shadow:0 0 18px rgba(0,0,0,0.55);
    }
    .card h3{
      font-family:'Cinzel',serif;
      font-size:1.0rem;
      color:var(--or);
      margin:0 0 10px;
    }
    .card a{
      display:inline-block;
      padding:9px 14px;
      border-radius:999px;
      background:rgba(255,215,0,0.16);
      color:#fff;
      text-decoration:none;
      font-weight:700;
      border:1px solid rgba(255,215,0,0.45);
      font-family:'Cinzel',serif;
      font-size:0.82rem;
      max-width:100%;
    }
    .card a:hover{ background:rgba(255,215,0,0.28); }

    /* Footer */
    .footer{
      margin-top: 18px;
      padding-top: 15px;
      font-size: 0.8rem;
      opacity: 0.92;
      line-height: 1.35rem;
      width:100%;
      max-width: 980px;
      border-top: 1px solid rgba(255,215,0,0.20);
    }
    .footer .line{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      align-items:center;
      justify-content:center;
      font-size:0.78rem;
      color: rgba(253,247,229,0.88);
    }
    .footer a{
      color: rgba(253,247,229,0.85) !important;
      text-decoration:none !important;
      border-bottom: 1px dotted rgba(255,215,0,0.55);
      padding-bottom: 1px;
      font-size:0.72rem;
      text-transform: lowercase;
    }

    /* =========================
       MODALE ZOHO (avec menu ‚ò∞ dedans)
       ========================= */
    .modal{
      position:fixed;
      inset:0;
      background:rgba(0,0,0,0.80);
      display:none;
      align-items:center;
      justify-content:center;
      z-index:9999;
      padding:18px;
    }
    .modal.open{ display:flex; }
    .modal-card{
      width:min(1200px, 98vw);
      height:min(820px, 90vh);
      background:rgba(0,0,0,0.92);
      border:1px solid rgba(255,215,0,0.55);
      border-radius:18px;
      box-shadow:0 20px 60px rgba(0,0,0,0.75);
      overflow:hidden;
      display:flex;
      flex-direction:column;
      position:relative;
    }
    .modal-head{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      padding:10px 12px;
      border-bottom:1px solid rgba(255,215,0,0.18);
      background:rgba(0,0,0,0.65);
    }
    .modal-left{
      display:flex;
      align-items:center;
      gap:10px;
      min-width:0;
    }
    .modal-title{
      font-family:'Cinzel',serif;
      color:var(--or);
      font-weight:700;
      font-size:0.95rem;
      letter-spacing:0.04em;
      text-align:left;
      min-width:0;
      overflow:hidden;
      text-overflow:ellipsis;
      white-space:nowrap;
    }
    .modal-actions{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:flex-end;
    }
    .btn-mini{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      padding:8px 12px;
      border-radius:999px;
      background:rgba(255,215,0,0.14);
      color:#fff;
      text-decoration:none;
      font-weight:700;
      border:1px solid rgba(255,215,0,0.40);
      font-family:'Cinzel',serif;
      font-size:0.78rem;
      cursor:pointer;
      white-space:nowrap;
    }
    .btn-mini:hover{ background:rgba(255,215,0,0.24); }

    /* Bouton ‚ò∞ DANS la modale */
    .btn-hamb{
      width:40px;
      height:32px;
      padding:0;
      border-radius:999px;
      font-size:16px;
      line-height:1;
    }

    /* Onglets */
    .modal-tabs{
      display:flex;
      gap:8px;
      padding:10px 12px;
      border-bottom:1px solid rgba(255,215,0,0.12);
      background:rgba(0,0,0,0.50);
      overflow:auto;
      -webkit-overflow-scrolling:touch;
    }
    .tab{
      display:flex;
      align-items:center;
      gap:8px;
      padding:8px 10px;
      border-radius:999px;
      border:1px solid rgba(255,215,0,0.28);
      background:rgba(0,0,0,0.35);
      color:rgba(253,247,229,0.92);
      cursor:pointer;
      white-space:nowrap;
      font-size:0.82rem;
      user-select:none;
    }
    .tab[aria-selected="true"]{
      background:rgba(255,215,0,0.14);
      border-color:rgba(255,215,0,0.50);
      color:#fff;
    }
    .tab .x{
      width:20px;
      height:20px;
      display:grid;
      place-items:center;
      border-radius:999px;
      border:1px solid rgba(255,215,0,0.22);
      background:rgba(0,0,0,0.20);
      font-weight:700;
      line-height:1;
      opacity:0.9;
    }
    .tab .x:hover{ background:rgba(255,215,0,0.12); }

    /* Corps iframe */
    .modal-body{ flex:1 1 auto; }
    .zoho-frame{
      width:100%;
      height:100%;
      border:0;
      display:block;
      background:#000;
    }
    .modal-hint{
      padding:10px 12px;
      border-top:1px solid rgba(255,215,0,0.18);
      font-size:0.82rem;
      opacity:0.88;
      line-height:1.35;
      text-align:left;
    }

    /* ===== Menu Zoho (drawer) DANS la modale ===== */
    .modal-drawer{
      position:absolute;
      top:0; bottom:0; left:0;
      width:var(--modalSideW);
      max-width:86vw;
      background:rgba(0,0,0,0.86);
      border-right:1px solid rgba(255,215,0,0.22);
      backdrop-filter: blur(6px);
      transform:translateX(-110%);
      transition:transform .18s ease;
      z-index:30;
      overflow:auto;
      -webkit-overflow-scrolling:touch;
      padding:14px 12px 16px;
    }
    .modal-card.drawer-open .modal-drawer{
      transform:translateX(0);
    }
    .drawer-title{
      font-family:'Cinzel',serif;
      color:var(--or);
      font-weight:700;
      letter-spacing:0.04em;
      text-align:left;
      margin:2px 0 8px;
      font-size:1.00rem;
    }
    .drawer-sub{
      text-align:left;
      font-size:0.82rem;
      opacity:0.90;
      margin:0 0 12px;
      line-height:1.35;
    }
    .drawer-nav details{
      border:1px solid rgba(255,215,0,0.16);
      border-radius:14px;
      overflow:hidden;
      background:rgba(0,0,0,0.25);
      margin:10px 0;
    }
    .drawer-nav summary{
      cursor:pointer;
      list-style:none;
      user-select:none;
      padding:10px 10px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      font-family:'Cinzel',serif;
      color:var(--or);
      font-weight:700;
      font-size:0.90rem;
      background:rgba(0,0,0,0.35);
      border-bottom:1px solid rgba(255,215,0,0.12);
    }
    .drawer-nav summary::-webkit-details-marker{ display:none; }
    .drawer-nav .group{
      padding:8px 8px 10px;
      text-align:left;
    }
    .drawer-nav a{
      display:block;
      padding:9px 10px;
      border-radius:12px;
      text-decoration:none;
      color:rgba(253,247,229,0.92);
      font-size:0.88rem;
      border:1px solid rgba(255,215,0,0.00);
      margin:6px 0;
      background:rgba(0,0,0,0.30);
    }
    .drawer-nav a:hover{
      background:rgba(255,215,0,0.10);
      border-color:rgba(255,215,0,0.18);
      color:#fff;
    }
    .drawer-nav .minihead{
      margin:10px 6px 6px;
      font-family:'Cinzel',serif;
      color:rgba(255,215,0,0.92);
      font-weight:700;
      font-size:0.82rem;
    }
    .drawer-nav .hint{
      font-size:0.78rem;
      opacity:0.85;
      margin:8px 4px 0;
      line-height:1.35;
    }
    .drawer-close-row{
      display:flex;
      justify-content:flex-end;
      margin:4px 0 10px;
    }

    .drawer-backdrop{
      position:absolute;
      inset:0;
      background:rgba(0,0,0,0.35);
      opacity:0;
      pointer-events:none;
      transition:opacity .18s ease;
      z-index:25;
    }
    .modal-card.drawer-open .drawer-backdrop{
      opacity:1;
      pointer-events:auto;
    }

    @media (max-width: 480px){
      .top-menu{ top:22px; right:22px; }
      .frame-fixed{ inset:12px; }
      .viewport-scroll{ inset:20px; }
      h1{ font-size:1.6rem; }
    }

    /* CENTRAGE BOUTONS */
    .btn-or{
      display:flex;
      justify-content:center;
      align-items:center;
      margin-left:auto;
      margin-right:auto;
      text-align:center;
    }
    .card a{
      display:flex;
      justify-content:center;
      align-items:center;
      margin-left:auto;
      margin-right:auto;
      text-align:center;
    }
    @media (max-width: 600px){
      .btn-or{ max-width:320px; width:100%; }
      .card a{ max-width:220px; width:100%; }
    }
    @media (min-width: 601px) and (max-width: 1024px){
      .btn-or{ max-width:340px; }
      .card a{ max-width:240px; }
    }
  </style>

  <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png">
  <link rel="icon" type="image/png" sizes="512x512" href="icon-512.png">
  <link rel="apple-touch-icon" href="icon-192.png">
</head>

<body>
  <script>window.ACCESS_GROUP="BUREAU_ADMIN"</script>
  <script src="js/membres-lock.js"></script>

  <div class="frame-fixed" aria-hidden="true"></div>

 <a class="menu-dot" href="menu.html" title="Menu" aria-label="Menu">‚ãØ</a>


  <div class="viewport-scroll">
    <div class="overlay">

      <div class="lock-badge">üîí Administration ‚Äì Acc√®s strictement r√©serv√©</div>
      <h1>Administration</h1>
      <p class="subtitle">Page r√©serv√©e au Bureau. Ne pas modifier sans autorisation.</p>

      <div class="warning">
        <strong>AVERTISSEMENT ‚Äì ACC√àS R√âSERV√â</strong>
        <p>
          Page destin√©e exclusivement aux membres autoris√©s du Bureau de l‚Äôassociation.
          Toute tentative d‚Äôacc√®s non autoris√©, alt√©ration, extraction ou usage frauduleux est interdite.
          Des mesures pourront √™tre engag√©es en cas d‚Äôabus.
        </p>
      </div>

      <a class="btn-or" href="index.html">‚Üê Retour au site public</a>

      <!-- 1) BUREAU (PRIV√â) -->
      <details class="accordion" id="bureau" open>
        <summary><span>Documents Bureau (priv√©)</span><span class="acc-right">‚ñæ</span></summary>
        <div class="acc-body">

          <details class="subacc">
            <summary><span>Grand Ma√Ætre</span><span class="acc-right">‚ñæ</span></summary>
            <div class="acc-body">
              <div class="cards">
                <div class="card">
                  <h3>Dossier Grand Ma√Ætre</h3>
                  <a href="https://workdrive.zohopublic.eu/external/51a1d98123ea4b58e1fdebf5a8cbeb28d927b6b9ed2d0694bd35df882d51d680">Acc√©der</a>
                </div>
              </div>
            </div>
          </details>

          <details class="subacc">
            <summary><span>Secr√©tariat</span><span class="acc-right">‚ñæ</span></summary>
            <div class="acc-body">
              <div class="cards">
                <div class="card">
                  <h3>Dossier Secr√©tariat</h3>
                  <a href="https://workdrive.zohopublic.eu/external/b0ed872395e698603ed3217aa8244717fe756cd7a9b9635c1412a7cdfe5aaf79">Acc√©der</a>
                </div>
              </div>
            </div>
          </details>

          <details class="subacc">
            <summary><span>Tr√©sorerie</span><span class="acc-right">‚ñæ</span></summary>
            <div class="acc-body">
              <div class="cards">
                <div class="card">
                  <h3>Dossier Tr√©sorerie</h3>
                  <a href="https://workdrive.zohopublic.eu/external/64aade6f8518560e79dc7f32ee0e74fc63d9fb98c4bdafab34cfb5cb05943447">Acc√©der</a>
                </div>
              </div>
            </div>
          </details>

          <details class="subacc">
            <summary><span>Archives (Bureau)</span><span class="acc-right">‚ñæ</span></summary>
            <div class="acc-body">
              <div class="cards">
                <div class="card">
                  <h3>Dossier Archives (Bureau)</h3>
                  <a href="https://workdrive.zohopublic.eu/external/ac5bcfc0c99200759e63f52a0645b7669df2a0c679dd0428c84d708ce0412da9">Acc√©der</a>
                </div>
              </div>
            </div>
          </details>

        </div>
      </details>

      <!-- 2) MEMBRES (GESTION) -->
      <details class="accordion" id="membres">
        <summary><span>Membres (gestion ‚Äì liens avec droits d√©p√¥t/√©dition)</span><span class="acc-right">‚ñæ</span></summary>
        <div class="acc-body">

          <details class="subacc" open>
            <summary><span>Nouveaux adh√©rents (d√©p√¥t)</span><span class="acc-right">‚ñæ</span></summary>
            <div class="acc-body">
              <div class="cards">
                <div class="card">
                  <h3>Dossier ‚ÄúNouveaux adh√©rents‚Äù</h3>
                  <a href="https://workdrive.zohopublic.eu/external/c908e2e93ed4c53b28193edf2ccd0e5f8ae9e6ad6da69b1103cdfead38110232">Acc√©der</a>
                </div>
              </div>
            </div>
          </details>

          <details class="subacc" open>
            <summary><span>Organisation & administratif (gestion)</span><span class="acc-right">‚ñæ</span></summary>
            <div class="acc-body">
              <div class="cards">
                <div class="card">
                  <h3>Statuts & r√®glements</h3>
                  <a href="https://workdrive.zohopublic.eu/external/bbef14e164079f93e6d88eb08493afc8b65962984d1c4e95d3d157e6e6aacb54">Acc√©der</a>
                </div>
                <div class="card">
                  <h3>Proc√®s-verbaux & comptes annuels</h3>
                  <a href="https://workdrive.zohopublic.eu/external/c89bc0b3c3c962a816fda411040256fdfbfefbb0d28f5252cbbdc0b9bfd4af9b">Acc√©der</a>
                </div>
                <div class="card">
                  <h3>Documents Pr√©fecture</h3>
                  <a href="https://workdrive.zohopublic.eu/external/6e035cbdb2d328f5ba7e109cfddec59fab7660d3b86d8d553e15c3f972fb261f">Acc√©der</a>
                </div>
                <div class="card">
                  <h3>Convocations</h3>
                  <a href="https://workdrive.zohopublic.eu/external/0e178282709b8d3facd6c91d6031c6edd3fb535335cdb5d4e0a538cfa28a6293">Acc√©der</a>
                </div>
                <div class="card">
                  <h3>Organisation des √©v√©nements</h3>
                  <a href="https://workdrive.zohopublic.eu/external/87b22a0ae0f1f4a527536ae6fbb85b50ba8fe9aa4c02d6fc246150ac26320a75">Acc√©der</a>
                </div>
                <div class="card">
                  <h3>Planning annuel</h3>
                  <a href="https://workdrive.zohopublic.eu/external/9d5321250fedd941495981ea972a17d4dc5481e91867796086c832a319118aab">Acc√©der</a>
                </div>
              </div>
            </div>
          </details>

          <details class="subacc">
            <summary><span>√âtudes (gestion)</span><span class="acc-right">‚ñæ</span></summary>
            <div class="acc-body">
              <div class="cards">
                <div class="card">
                  <h3>Documents d‚Äô√©tude</h3>
                  <a href="https://workdrive.zohopublic.eu/external/9b7e1c9f22f75fa5052043249d083584b7a71ed1eb614e50baf4e08a0108c277">Acc√©der</a>
                </div>
                <div class="card">
                  <h3>Planches d‚Äô√©tude</h3>
                  <a href="https://workdrive.zohopublic.eu/external/4242791467f71f9782fd92e6a59b35d7d6b52272be0a5eb4811bfe0fbb7220ca">Acc√©der</a>
                </div>
                <div class="card">
                  <h3>Proc√®s-verbaux (√âtudes)</h3>
                  <a href="https://workdrive.zohopublic.eu/external/c91963d5a302cd8f69bb52ac308f1d5b82535f8006034238966e5f0f57ea785f">Acc√©der</a>
                </div>
                <div class="card">
                  <h3>Travaux & documents</h3>
                  <a href="https://workdrive.zohopublic.eu/external/49fbeba7065a33191da058278d3abfbc27a4a64905c497df7c9da1837aad78f2">Acc√©der</a>
                </div>
                <div class="card">
                  <h3>Biblioth√®que d‚Äô√©tude</h3>
                  <a href="https://workdrive.zohopublic.eu/external/b671cad53f794c23d87ab80e01f71bfd993d40fb60c36b2d512efb13d72c4ad5">Acc√©der</a>
                </div>
              </div>
            </div>
          </details>

          <details class="subacc">
            <summary><span>Archives (gestion)</span><span class="acc-right">‚ñæ</span></summary>
            <div class="acc-body">
              <div class="cards">
                <div class="card">
                  <h3>Archives ‚Äì Doctrine interne</h3>
                  <a href="https://workdrive.zohopublic.eu/external/fdd8772d8fa8be5bb31e7a86e79e8f5448ee6259863b9644e60510e66c263ea3">Acc√©der</a>
                </div>
              </div>
            </div>
          </details>

        </div>
      </details>

      <a class="btn-or" href="documents-internes.html">‚Üê Retour √† la page membres</a>

      <div class="footer">
        <div class="line">
          <span>¬© OSD9TDJ Association Loi 1901, Tous droits r√©serv√©s</span>
          <span>¬∑</span>
          <a href="mentions.html">mentions l√©gales</a>
          <span>¬∑</span>
          <a href="cookies.html">cookies</a>
        </div>
      </div>

    </div>
  </div>

  <!-- MODALE ZOHO -->
  <div class="modal" id="zohoModal" aria-hidden="true">
    <div class="modal-card" id="zohoModalCard" role="dialog" aria-modal="true" aria-label="Documents Zoho">

      <!-- Drawer menu (Zoho) -->
      <div class="modal-drawer" id="zohoDrawer" aria-label="Menu Zoho">
        <div class="drawer-close-row">
          <button class="btn-mini" type="button" id="zohoDrawerClose">Fermer menu</button>
        </div>
        <div class="drawer-title">Pages Zoho</div>
        <div class="drawer-sub">
          Ouvre une page en onglet dans cette fen√™tre (tu peux en ouvrir plusieurs).
        </div>
        <nav class="drawer-nav" id="zohoDrawerNav">
          <div class="hint">Chargement du menu‚Ä¶</div>
        </nav>
      </div>
      <div class="drawer-backdrop" id="zohoDrawerBackdrop" aria-hidden="true"></div>

      <div class="modal-head">
        <div class="modal-left">
          <!-- ‚ò∞ ICI : le menu est uniquement dans la fen√™tre Zoho -->
          <button class="btn-mini btn-hamb" type="button" id="zohoDrawerToggle" title="Menu">‚ò∞</button>
          <div class="modal-title" id="zohoModalTitle">Documents</div>
        </div>
        <div class="modal-actions">
          <a class="btn-mini" id="zohoOpenExternal" href="#" target="_blank" rel="noopener noreferrer">Ouvrir dans Zoho</a>
          <button class="btn-mini" type="button" id="zohoCloseAll">Fermer</button>
        </div>
      </div>

      <div class="modal-tabs" id="zohoTabs" aria-label="Onglets ouverts"></div>

      <div class="modal-body">
        <iframe class="zoho-frame" id="zohoFrame" title="Zoho" src="about:blank"></iframe>
      </div>

      <div class="modal-hint">
        Si Zoho refuse l‚Äôint√©gration (s√©curit√©), l‚Äôiframe peut rester vide : utilise ‚ÄúOuvrir dans Zoho‚Äù.
        Tu peux ouvrir plusieurs pages (onglets) via ‚ò∞.
      </div>
    </div>
  </div>

  <script>
    /* =========================
       Modale Zoho multi-onglets
       ========================= */
    const modal = document.getElementById("zohoModal");
    const modalCard = document.getElementById("zohoModalCard");
    const frame = document.getElementById("zohoFrame");
    const closeAllBtn = document.getElementById("zohoCloseAll");
    const openExternal = document.getElementById("zohoOpenExternal");
    const modalTitle = document.getElementById("zohoModalTitle");
    const tabsWrap = document.getElementById("zohoTabs");

    // Drawer (menu ‚ò∞ dans la modale)
    const drawerToggle = document.getElementById("zohoDrawerToggle");
    const drawerClose = document.getElementById("zohoDrawerClose");
    const drawerBackdrop = document.getElementById("zohoDrawerBackdrop");
    const drawerNav = document.getElementById("zohoDrawerNav");

    function closeDrawer(){ modalCard.classList.remove("drawer-open"); }
    function toggleDrawer(){ modalCard.classList.toggle("drawer-open"); }

    drawerToggle.addEventListener("click", toggleDrawer);
    drawerClose.addEventListener("click", closeDrawer);
    drawerBackdrop.addEventListener("click", closeDrawer);

    const opened = []; // { id, url, title }
    let activeId = null;

    const uid = () => Math.random().toString(36).slice(2) + Date.now().toString(36);

    function renderTabs(){
      tabsWrap.innerHTML = "";
      if (opened.length === 0){
        const empty = document.createElement("div");
        empty.style.opacity = "0.85";
        empty.style.fontSize = "0.82rem";
        empty.textContent = "Aucun onglet ouvert.";
        tabsWrap.appendChild(empty);
        return;
      }

      opened.forEach(doc => {
        const tab = document.createElement("div");
        tab.className = "tab";
        tab.setAttribute("role","tab");
        tab.setAttribute("aria-selected", doc.id === activeId ? "true" : "false");
        tab.title = doc.title;

        const label = document.createElement("span");
        label.textContent = doc.title;

        const x = document.createElement("span");
        x.className = "x";
        x.textContent = "√ó";
        x.title = "Fermer cet onglet";

        tab.addEventListener("click", () => setActive(doc.id));
        x.addEventListener("click", (e) => {
          e.stopPropagation();
          closeTab(doc.id);
        });

        tab.appendChild(label);
        tab.appendChild(x);
        tabsWrap.appendChild(tab);
      });
    }

    function setActive(id){
      const doc = opened.find(d => d.id === id);
      if (!doc) return;
      activeId = id;
      modalTitle.textContent = doc.title || "Documents";
      frame.src = doc.url;
      openExternal.href = doc.url;
      renderTabs();
    }

    function openZohoUrl(url, title){
      if (!url) return;

      const existing = opened.find(d => d.url === url);
      if (existing){
        modal.classList.add("open");
        modal.setAttribute("aria-hidden","false");
        setActive(existing.id);
        return;
      }

      const doc = { id: uid(), url, title: title || "Documents" };
      opened.push(doc);

      modal.classList.add("open");
      modal.setAttribute("aria-hidden","false");
      setActive(doc.id);
    }

    function closeTab(id){
      const idx = opened.findIndex(d => d.id === id);
      if (idx < 0) return;

      const wasActive = opened[idx].id === activeId;
      opened.splice(idx, 1);

      if (opened.length === 0){
        closeZohoAll();
        return;
      }

      if (wasActive){
        const next = opened[Math.max(0, idx - 1)];
        setActive(next.id);
      } else {
        renderTabs();
      }
    }

    function closeZohoAll(){
      modal.classList.remove("open");
      modal.setAttribute("aria-hidden","true");
      frame.src = "about:blank";
      opened.length = 0;
      activeId = null;
      renderTabs();
      closeDrawer();
    }

    closeAllBtn.addEventListener("click", closeZohoAll);
    modal.addEventListener("click", (e) => { if (e.target === modal) closeZohoAll(); });
    document.addEventListener("keydown", (e) => { if (e.key === "Escape") closeZohoAll(); });

    /* ==========================================
       Capture liens Zoho -> ouverture en modale
       ========================================== */
    function isZohoUrl(url){
      return /zohopublic\.eu|zoho\.com|zoho\.eu/i.test(url || "");
    }
    function isInternalSiteLink(url){
      return (url || "").startsWith("#") || (url || "").endsWith(".html") || (url || "").startsWith("index");
    }

    document.addEventListener("click", (e) => {
      const a = e.target.closest("a");
      if (!a) return;

      const url = a.getAttribute("href");
      if (!url) return;

      // Liens internes => normal
      if (isInternalSiteLink(url)) return;

      // Liens Zoho => modale + multi-onglets
      if (isZohoUrl(url)){
        e.preventDefault();
        const title =
          a.closest(".card")?.querySelector("h3")?.textContent?.trim()
          || a.textContent.trim()
          || "Documents";

        openZohoUrl(url, title);
      }
    });

    /* =========================================================
       MENU ‚ò∞ DANS LA MODALE : liste toutes les pages Zoho du site
       ========================================================= */
    function buildZohoDrawerMenu(){
      drawerNav.innerHTML = "";

      const accordions = document.querySelectorAll("details.accordion");
      if (!accordions.length){
        drawerNav.innerHTML = '<div class="hint">Aucun document trouv√©.</div>';
        return;
      }

      accordions.forEach(acc => {
        const accTitle = acc.querySelector(":scope > summary span")?.textContent?.trim() || "Section";
        const accDetails = document.createElement("details");
        accDetails.open = true;

        const accSum = document.createElement("summary");
        accSum.innerHTML = `<span>${accTitle}</span><span style="opacity:.9">‚ñæ</span>`;
        accDetails.appendChild(accSum);

        const group = document.createElement("div");
        group.className = "group";

        const subAccs = acc.querySelectorAll(":scope .subacc");
        if (subAccs.length){
          subAccs.forEach(sa => {
            const subTitle = sa.querySelector(":scope > summary span")?.textContent?.trim() || "Sous-section";

            const h = document.createElement("div");
            h.className = "minihead";
            h.textContent = subTitle;
            group.appendChild(h);

            const cards = sa.querySelectorAll(".card");
            cards.forEach(card => {
              const title = card.querySelector("h3")?.textContent?.trim();
              const link = card.querySelector('a[href]')?.getAttribute("href");
              if (!title || !link || !isZohoUrl(link)) return;

              const item = document.createElement("a");
              item.href = link;              // intercept√© -> openZohoUrl
              item.textContent = title;
              item.addEventListener("click", () => closeDrawer()); // on referme le menu apr√®s clic
              group.appendChild(item);
            });
          });
        }

        if (!group.querySelector("a")){
          const hint = document.createElement("div");
          hint.className = "hint";
          hint.textContent = "Aucun lien Zoho dans cette section.";
          group.appendChild(hint);
        } else {
          const hint = document.createElement("div");
          hint.className = "hint";
          hint.textContent = "Clique pour ouvrir en onglet dans la fen√™tre.";
          group.appendChild(hint);
        }

        accDetails.appendChild(group);
        drawerNav.appendChild(accDetails);
      });
    }

    buildZohoDrawerMenu();
    renderTabs();
  </script>
  <script>
(function(){
  try{
    sessionStorage.setItem("osd_prev_page", location.href);
  }catch(e){}

  document.addEventListener("click", function(e){
    const a = e.target && e.target.closest ? e.target.closest("a[href]") : null;
    if(!a) return;
    const href = a.getAttribute("href") || "";
    if(href.includes("menu.html")){
      try{
        sessionStorage.setItem("osd_prev_page", location.href);
      }catch(err){}
    }
  }, true);
})();
</script>
<script defer src="/osd.js"></script>

</body>
</html>
