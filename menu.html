<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />

  <!-- ✅ SEO -->
  <title>Menu de navigation | OSD9TDJ</title>
  <meta name="description" content="Menu de navigation du site O.S.D.9.T.D.J. : accès rapide aux pages principales, aux informations officielles et aux pages encyclopédiques en cours de création." />
  <meta name="keywords" content="OSD9TDJ, ordre templier, association loi 1901, templiers, histoire du Temple, adhésion, événements, boutique, membres, statuts, mentions légales, cookies, FAQ" />
  <meta name="robots" content="index,follow,max-image-preview:large,max-snippet:-1,max-video-preview:-1" />
  <meta name="author" content="O.S.D.9.T.D.J." />
  <link rel="canonical" href="https://osd9tdj.org/menu.html" />

  <!-- ✅ OpenGraph / Twitter -->
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Menu de navigation | OSD9TDJ" />
  <meta property="og:description" content="Accès rapide à l’arborescence du site O.S.D.9.T.D.J." />
  <meta property="og:url" content="https://osd9tdj.org/menu.html" />
  <meta property="og:site_name" content="OSD9TDJ" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Menu de navigation | OSD9TDJ" />
  <meta name="twitter:description" content="Accès rapide à l’arborescence du site O.S.D.9.T.D.J." />

  <!-- ✅ Watermark invisible / empreinte -->
  <meta name="generator" content="OSD9TDJ - Menu de navigation" />
  <meta name="application-name" content="OSD9TDJ" />
  <meta name="referrer" content="strict-origin-when-cross-origin" />

  <!-- ✅ Police médiévale -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Uncial+Antiqua&display=swap" rel="stylesheet">

  <!-- ✅ JSON-LD (jslon) : WebSite + Organization + WebPage -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@graph":[
      {
        "@type":"Organization",
        "@id":"https://osd9tdj.org/#org",
        "name":"O.S.D.9.T.D.J.",
        "url":"https://osd9tdj.org/",
        "logo":"https://osd9tdj.org/sceaudeux.PNG",
        "description":"Association loi 1901 – site officiel O.S.D.9.T.D.J."
      },
      {
        "@type":"WebSite",
        "@id":"https://osd9tdj.org/#website",
        "url":"https://osd9tdj.org/",
        "name":"OSD9TDJ",
        "publisher":{"@id":"https://osd9tdj.org/#org"},
        "inLanguage":"fr-FR"
      },
      {
        "@type":"WebPage",
        "@id":"https://osd9tdj.org/menu.html#webpage",
        "url":"https://osd9tdj.org/menu.html",
        "name":"Menu de navigation | OSD9TDJ",
        "isPartOf":{"@id":"https://osd9tdj.org/#website"},
        "about":{"@id":"https://osd9tdj.org/#org"},
        "inLanguage":"fr-FR"
      },
      {
        "@type":"SiteNavigationElement",
        "@id":"https://osd9tdj.org/menu.html#nav",
        "name":"Menu de navigation",
        "url":"https://osd9tdj.org/menu.html",
        "inLanguage":"fr-FR"
      }
    ]
  }
  </script>

  <style>
  :root{
    --veil: rgba(0,0,0,.72);
    --panelW: min(560px, 92vw);
    --panelH: min(92vh, 920px);
    --radius: 18px;
    --ink: #2b1b12;
    --red: #a11212;
    --line: rgba(70,50,35,.24);
    --btn: rgba(255,255,255,.18);
  }

  html,body{height:100%; margin:0;}
  body{
    font-family: "Uncial Antiqua", ui-serif, Georgia, "Times New Roman", serif;
    color: var(--ink);

    background:
      linear-gradient(to bottom, rgba(0,0,0,.38), rgba(0,0,0,.10)),
      url("parchemin.jpg") center/cover no-repeat fixed;

    overflow:hidden;
  }

  .veil{
    position:fixed; inset:0;
    background: var(--veil);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    z-index:10;
  }

  .panel{
    position:fixed;
    top: 50%;
    left: clamp(10px, 3vw, 28px);
    transform: translate(-120%, -50%);
    width: var(--panelW);
    height: var(--panelH);
    z-index: 20;

    border-radius: var(--radius);
    box-shadow: 0 26px 80px rgba(0,0,0,.55);
    overflow:hidden;

    background:
      linear-gradient(to bottom, rgba(0,0,0,.26), rgba(0,0,0,.06)),
      url("parchemin.jpg") center/cover no-repeat;

    outline: 1px solid rgba(0,0,0,.12);
  }
  .panel.open{
    animation: slideIn 2.6s cubic-bezier(.18,.92,.18,1) forwards;
  }

  /* ✅ MODIF DEMANDÉE : arrive au centre, pause, puis va à gauche + arrondi vertical côté gauche */
  @keyframes slideIn{
    0%{
      transform: translate(120%, -50%);
      border-radius: var(--radius);
    }

    /* Arrive au centre et se stabilise */
    58%{
      transform: translate(0, -50%);
      border-radius: var(--radius);
    }
    72%{
      transform: translate(0, -50%);
      border-radius: var(--radius);
    }

    /* Fin à gauche + forme arrondie côté gauche (tiers de rond sur la hauteur) */
    100%{
      transform: translate(-12px, -50%);
      border-radius: 38vh var(--radius) var(--radius) 38vh;
    }
  }

  .header{
    position:sticky; top:0;
    padding: 18px 18px 12px 18px;
    display:flex; align-items:flex-start; justify-content:space-between;
    gap: 12px;
    background: linear-gradient(to bottom, rgba(255,255,255,.55), rgba(255,255,255,.18));
    border-bottom: 1px solid var(--line);
    z-index: 30;
  }

  .title{
    font-size: 28px;
    line-height:1.05;
    letter-spacing:.4px;
    margin:0;
    text-shadow: 0 1px 0 rgba(255,255,255,.5);
  }

  .first{
    color: var(--red);
    font-weight: 700;
    margin-right: 0;
  }

  .actions{ display:flex; gap:10px; align-items:center; }
  .btn{
    appearance:none; border:0;
    padding: 10px 12px;
    border-radius: 12px;
    background: var(--btn);
    outline: 1px solid rgba(0,0,0,.18);
    color: #2a1a12;
    font-weight: 700;
    cursor:pointer;
    user-select:none;
    font-family: "Uncial Antiqua", ui-serif, Georgia, "Times New Roman", serif;
  }
  .btn.close{
    width: 42px; height: 42px;
    display:grid; place-items:center;
    font-size: 18px;
    padding:0;
  }

  .scroll{
    height: calc(var(--panelH) - 84px);
    overflow:auto;
    padding: 14px 16px calc(190px + env(safe-area-inset-bottom)) 16px;
    scrollbar-width: thin;
    scrollbar-color: rgba(60,45,35,.45) transparent;
  }

  details.group{
    border-radius: 16px;
    background: rgba(255,255,255,.14);
    outline: 1px solid rgba(0,0,0,.12);
    margin: 10px 0;
    overflow:hidden;
  }

  summary{
    list-style:none;
    display:flex; align-items:center; justify-content:space-between;
    gap:10px;
    padding: 14px 14px;
    cursor:pointer;
    user-select:none;
    background: rgba(255,255,255,.10);
    border-bottom: 1px dashed rgba(70,50,35,.22);
  }
  summary::-webkit-details-marker{ display:none; }

  .label{
    font-size: 20px;
    font-weight: 800;
    letter-spacing:.3px;
    text-shadow: 0 1px 0 rgba(255,255,255,.45);
  }

  .chev{
    width: 34px; height: 34px;
    border-radius: 12px;
    background: rgba(0,0,0,.10);
    outline: 1px solid rgba(0,0,0,.16);
    display:grid; place-items:center;
    flex: 0 0 auto;
  }
  .chev svg{ width:18px; height:18px; opacity:.85; }

  details[open] .chev svg{
    transform: rotate(180deg);
    transition: transform .22s ease;
  }

  .items{
    padding: 10px 12px 12px 12px;
    display:grid;
    gap: 10px;
  }

  a.item{
    display:flex; align-items:center; justify-content:space-between;
    gap: 12px;
    padding: 12px 12px;
    border-radius: 14px;
    text-decoration:none;
    color: var(--ink);
    background: rgba(255,255,255,.10);
    outline: 1px solid rgba(0,0,0,.10);
  }
  a.item:hover{ background: rgba(255,255,255,.16); }

  .sub{
    font-size: 18px;
    font-weight: 700;
    letter-spacing:.2px;
  }

  .lock{
    width: 20px; height: 20px; flex:0 0 auto;
    opacity:.9;
    filter: drop-shadow(0 2px 2px rgba(0,0,0,.25));
  }

  .write{
    display:inline-block;
    overflow:hidden;
    vertical-align:bottom;
    clip-path: inset(0 100% 0 0);
  }

  .write.reveal{
    animation: inkReveal var(--dur, 2600ms) linear forwards;
  }
  @keyframes inkReveal{
    to{ clip-path: inset(0 0 0 0); }
  }

  /* ✅ SCEAU : descendu + centré + bandeau quasi invisible (plus de découpage visible) */
  .sealDock{
    position: relative;
    display:flex;
    justify-content:center; /* ✅ centré */

    margin: 34px 0 0 0;
    padding: 26px 2px calc(18px + env(safe-area-inset-bottom)) 2px; /* ✅ descend + équilibre */
    pointer-events:none;
  }

  .sealDock::before{
    content:"";
    position:absolute;
    left: 12px; right: 12px;
    top: 14px;
    height: 190px;

    border-radius: 32px;
    filter: blur(14px);
    opacity: .85;

    background: radial-gradient(
      ellipse at center,
      rgba(230,216,186,.42) 0%,
      rgba(230,216,186,.22) 55%,
      rgba(230,216,186,0) 100%
    );

    mix-blend-mode: multiply;
    pointer-events:none;
  }

  .seal{
    position: relative;
    width: clamp(220px, 32vw, 320px); /* ✅ beaucoup plus gros */
    height:auto;
    opacity:0;
    transition: opacity .45s ease;
    filter: drop-shadow(0 14px 26px rgba(0,0,0,.40));
  }
  .seal.show{
    opacity:1;
  }
  .seal::before{
    content:"";
    position:absolute;
    inset: -28px;
    border-radius: 999px;
    pointer-events:none;
    z-index: -1;

    background: radial-gradient(
      circle at 50% 55%,
      rgba(238,230,214,.95) 0%,
      rgba(238,230,214,.70) 38%,
      rgba(238,230,214,.25) 62%,
      rgba(238,230,214,0) 78%
    );

    filter: blur(6px);
  }
  .wm{
    position:absolute;
    left:-9999px;
    top:auto;
    width:1px; height:1px;
    overflow:hidden;
    opacity:0.001;
    pointer-events:none;
    user-select:none;
  }

  @media (orientation: landscape){
    :root{
      --panelW: min(620px, 70vw);
      --panelH: min(88vh, 720px);
    }
    .title{ font-size: 26px; }
    .label{ font-size: 19px; }
    .sub{ font-size: 17px; }
  }
</style>
</head>

<body>
  <div class="wm" aria-hidden="true">
    O.S.D.9.T.D.J. — osd9tdj.org — Menu de navigation — Association loi 1901 — contenus originaux — empreinte site.
  </div>

  <div class="veil" id="veil" aria-hidden="true"></div>

  <main class="panel" id="panel" role="dialog" aria-modal="true" aria-label="Menu de navigation">
    <header class="header">
      <h1 class="title" id="menuTitle">Menu de navigation</h1>
      <div class="actions">
        <button class="btn" id="btnBack" type="button">← Revenir</button>
        <button class="btn close" id="btnClose" type="button" aria-label="Fermer">✕</button>
      </div>
    </header>

    <section class="scroll" id="scroll">
      <details class="group" >
        <summary>
          <div class="label js-write">Général</div>
          <div class="chev" aria-hidden="true">
            <svg viewBox="0 0 24 24" fill="none">
              <path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
        </summary>
        <div class="items">
          <a class="item" href="index.html"><span class="sub js-write">Accueil</span></a>
          <a class="item" href="quinoussommes.html"><span class="sub js-write">Qui nous sommes</span></a>
          <a class="item" href="notre-mission.html"><span class="sub js-write">Notre mission</span></a>
          <a class="item" href="histoire.html"><span class="sub js-write">Notre histoire</span></a>
          <a class="item" href="contact.html"><span class="sub js-write">Contact</span></a>
        </div>
      </details>

      <details class="group">
        <summary>
          <div class="label js-write">Histoire templière</div>
          <div class="chev" aria-hidden="true">
            <svg viewBox="0 0 24 24" fill="none">
              <path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
        </summary>
        <div class="items">
          <a class="item" href="ordres-historiques.html"><span class="sub js-write">Ordres historiques</span></a>
          <a class="item" href="vocation.html"><span class="sub js-write">Histoire du Temple</span></a>
          <a class="item" href="commanders.html"><span class="sub js-write">Dignitaires de l’Ordre</span></a>
          <a class="item" href="bernard.html"><span class="sub js-write">Bernard de Clairvaux</span></a>
        </div>
      </details>

      <details class="group">
        <summary>
          <div class="label js-write">Activités &amp; événements</div>
          <div class="chev" aria-hidden="true">
            <svg viewBox="0 0 24 24" fill="none">
              <path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
        </summary>
        <div class="items">
          <a class="item" href="activites.html"><span class="sub js-write">Nos événements</span></a>
        </div>
      </details>

      <details class="group">
        <summary>
          <div class="label js-write">Adhésion</div>
          <div class="chev" aria-hidden="true">
            <svg viewBox="0 0 24 24" fill="none">
              <path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
        </summary>
        <div class="items">
          <a class="item" href="adhesion.html"><span class="sub js-write">Adhésion</span></a>
          <a class="item" href="cotisations.html"><span class="sub js-write">Cotisations</span></a>
          <a class="item" href="notice-adhesion.html"><span class="sub js-write">Procédure d’adhésion</span></a>

          <!-- ✅ AJOUT DEMANDÉ : Ouvrir une commanderie -->
          <a class="item" href="commanderie.html"><span class="sub js-write">Ouvrir une commanderie</span></a>
        </div>
      </details>

      <details class="group">
        <summary>
          <div class="label js-write">Boutique</div>
          <div class="chev" aria-hidden="true">
            <svg viewBox="0 0 24 24" fill="none">
              <path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
        </summary>
        <div class="items">
          <a class="item" href="boutique.html"><span class="sub js-write">Boutique</span></a>
        </div>
      </details>

      <details class="group">
        <summary>
          <div class="label js-write">Membres</div>
          <div class="chev" aria-hidden="true">
            <svg viewBox="0 0 24 24" fill="none">
              <path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
        </summary>
        <div class="items">
          <a class="item" href="documents-internes.html">
            <span class="sub js-write">Accès réservé aux membres</span>
            <svg class="lock" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M7 11V8a5 5 0 0 1 10 0v3" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              <path d="M6 11h12v10H6V11Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
              <path d="M12 15v2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </a>

          <a class="item" href="administration.html">
            <span class="sub js-write">Administration</span>
            <svg class="lock" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M7 11V8a5 5 0 0 1 10 0v3" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              <path d="M6 11h12v10H6V11Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
              <path d="M12 15v2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </a>
        </div>
      </details>

      <details class="group">
        <summary>
          <div class="label js-write">Informations officielles &amp; aide</div>
          <div class="chev" aria-hidden="true">
            <svg viewBox="0 0 24 24" fill="none">
              <path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
        </summary>
        <div class="items">
          <a class="item" href="statuts.html"><span class="sub js-write">Statuts</span></a>
          <a class="item" href="mentions.html"><span class="sub js-write">Mentions / informations officielles</span></a>
          <a class="item" href="cookies.html"><span class="sub js-write">Cookies</span></a>
          <a class="item" href="faq.html"><span class="sub js-write">FAQ</span></a>
        </div>
      </details>

      <details class="group">
        <summary>
          <div class="label js-write">Encyclopédique (en cours de création)</div>
          <div class="chev" aria-hidden="true">
            <svg viewBox="0 0 24 24" fill="none">
              <path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
        </summary>
        <div class="items">
          <a class="item" href="Wikipedia.html"><span class="sub js-write">Page encyclopédique</span></a>
          <a class="item" href="Utilisateur_Wikipedia.html"><span class="sub js-write">Fiche utilisateur (projet)</span></a>
        </div>
      </details>

      <div style="display:flex; justify-content:center; margin: 14px 0 8px 0;">
        <button class="btn" id="btnBack2" type="button" style="background:rgba(0,0,0,.14); color:#23150f;">
          ← Revenir à la page précédente
        </button>
      </div>

      <div class="sealDock" aria-hidden="true">
        <img id="seal" class="seal" src="sceaudeux.PNG" alt="Sceau OSD9TDJ">
      </div>
    </section>
  </main>

  <script>
    const SOUND_PLUME  = "plume.mp3";
    const SOUND_EPEE   = "epee.mp3";
    const SOUND_TAMPON = "tampon.mp3";

    let audioReady = false;
    let aPlume, aEpee, aTampon;

    function initAudioOnce(){
      if (audioReady) return;
      try{
        aPlume  = new Audio(SOUND_PLUME);
        aEpee   = new Audio(SOUND_EPEE);
        aTampon = new Audio(SOUND_TAMPON);
        [aPlume,aEpee,aTampon].forEach(a => { a.preload = "auto"; a.volume = 0.85; });
        audioReady = true;
      }catch(e){}
    }
    function playSafe(a){
      if(!audioReady || !a) return;
      try{ a.currentTime = 0; a.play().catch(()=>{}); }catch(e){}
    }

    function goBack(){
      if (history.length > 1) history.back();
      else location.href = "index.html";
    }

    function makeFirstLetterRed(node){
      const txt = (node.textContent || "").trim();
      if(!txt) return;
      if(node.dataset.firstDone) return;
      node.dataset.firstDone = "1";

      const first = txt[0];
      const rest  = txt.slice(1);

      node.textContent = "";
      const s1 = document.createElement("span");
      s1.className = "first";
      s1.textContent = first;

      const s2 = document.createElement("span");
      s2.textContent = rest;

      node.appendChild(s1);
      node.appendChild(s2);
    }

    function applyWriting(){
      const els = document.querySelectorAll(".js-write, .title");
      els.forEach(el => {
        makeFirstLetterRed(el);

        if(el.dataset.writeDone) return;
        el.dataset.writeDone = "1";

        const wrap = document.createElement("span");
        wrap.className = "write";
        while(el.firstChild) wrap.appendChild(el.firstChild);
        el.appendChild(wrap);

        const text = wrap.textContent.trim();
        const dur = Math.max(2400, Math.min(7200, text.length * 140));
        wrap.style.setProperty("--dur", dur + "ms");
      });

      setTimeout(() => {
        document.querySelectorAll(".write").forEach(w => w.classList.add("reveal"));
        playSafe(aPlume);
      }, 1400);
    }

    const panel = document.getElementById("panel");
    const veil  = document.getElementById("veil");
    const seal  = document.getElementById("seal");

    function openMenu(){
      panel.classList.add("open");

      const unlock = () => { initAudioOnce(); document.removeEventListener("pointerdown", unlock); };
      document.addEventListener("pointerdown", unlock, { once:true });

      applyWriting();

      setTimeout(() => {
        seal.classList.add("show");
        playSafe(aTampon);
      }, 2600);
    }

    document.getElementById("btnBack").addEventListener("click", () => { initAudioOnce(); playSafe(aEpee); goBack(); });
    document.getElementById("btnBack2").addEventListener("click", () => { initAudioOnce(); playSafe(aEpee); goBack(); });
    document.getElementById("btnClose").addEventListener("click", () => { initAudioOnce(); playSafe(aEpee); goBack(); });

    veil.addEventListener("click", () => { initAudioOnce(); playSafe(aEpee); goBack(); });
    panel.addEventListener("click", (e) => e.stopPropagation());

    window.addEventListener("load", () => openMenu());
  </script>
</body>
</html>
